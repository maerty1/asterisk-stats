# üìä Asterisk Queue Analytics

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π Asterisk —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –ø–µ—Ä–µ–∑–≤–æ–Ω–æ–≤, –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ email-–æ—Ç—á–µ—Ç–∞–º–∏.

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Node](https://img.shields.io/badge/node-14%2B-brightgreen.svg)

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã `screen/screen1.png` –∏ `screen/screen2.png`

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - Dashboard —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](screen/screen1.png)
*Dashboard —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ (–í—Å–µ–≥–æ –∑–≤–æ–Ω–∫–æ–≤, –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∞, –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ, SLA), –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ (–ü–µ—Ä–µ–∑–≤–æ–Ω—ã, –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏) –∏ –≥—Ä–∞—Ñ–∏–∫–æ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–æ–≤ –ø–æ —á–∞—Å–∞–º*

### –î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ –∑–≤–æ–Ω–∫–æ–≤
![–î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥](screen/screen2.png)
*–¢–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∑–≤–æ–Ω–∫–∞–º–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π, –ø–æ–∏—Å–∫–∞, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –∑–≤–æ–Ω–∫–æ–≤ (–ü—Ä–∏–Ω—è—Ç, –ù–µ –æ—Ç–≤–µ—á–µ–Ω, –ó–∞–Ω—è—Ç–æ) –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤*

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä–∞
- **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –í—Å–µ–≥–æ –∑–≤–æ–Ω–∫–æ–≤, –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∞, SLA (20 —Å–µ–∫)
- **–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –ø–µ—Ä–µ–∑–≤–æ–Ω–∞–º
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**: –°—Ä–µ–¥–Ω–µ–µ –æ–∂–∏–¥–∞–Ω–∏–µ, –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞, –≤—Ä–µ–º—è –≤ –æ—á–µ—Ä–µ–¥–∏
- **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**: ASA (Average Speed of Answer), Abandon Rate

### üîÑ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∑–≤–æ–Ω–æ–≤
- **–ü–µ—Ä–µ–∑–≤–æ–Ω–∏–ª —Å–∞–º**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–∑–≤–æ–Ω–∏–ª –ø–æ—Å–ª–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞
- **–ü–µ—Ä–µ–∑–≤–æ–Ω–∏–ª–∏ –º—ã**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∑–≤–æ–Ω–æ–≤ –æ—Ç –∞–≥–µ–Ω—Ç–æ–≤ –∫ –∫–ª–∏–µ–Ω—Ç–∞–º
- **–ù–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω**: –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–≤–æ–Ω–æ–≤

### üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ü–æ—á–∞—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–æ–≤ –ø–æ —á–∞—Å–∞–º
- **–¢—Ä–µ–Ω–¥—ã**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –ø–µ—Ä–∏–æ–¥–æ–º
- **–î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞**: –ü–æ–ª–Ω—ã–π –ª–æ–≥ –∑–≤–æ–Ω–∫–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, –ø–æ–∏—Å–∫–æ–º –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π

### üéµ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∞—É–¥–∏–æ-–ø–ª–µ–µ—Ä –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∞—É–¥–∏–æ

### üìß Email-–æ—Ç—á–µ—Ç—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ email
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –æ—á–µ—Ä–µ–¥–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
- HTML-—Ñ–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

### üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑
- **–ü–æ –æ—á–µ—Ä–µ–¥—è–º**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–π –æ—á–µ—Ä–µ–¥–∏
- **–í—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏**: –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤ (–æ—Ç –¥–ª–∏–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –∫ –∫–æ—Ä–æ—Ç–∫–∏–º)
- **–ò—Å—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏**: –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤ (–æ—Ç –∫–æ—Ä–æ—Ç–∫–∏—Ö –Ω–æ–º–µ—Ä–æ–≤ –∫ –¥–ª–∏–Ω–Ω—ã–º)

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js**: 14.0 –∏–ª–∏ –≤—ã—à–µ
- **MySQL/MariaDB**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Asterisk (asteriskcdrdb)
- **–î–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–∞–º**: 
  - `asteriskcdrdb.cdr` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–≤–æ–Ω–∫–∞—Ö
  - `asteriskcdrdb.queuelog` - –ª–æ–≥–∏ –æ—á–µ—Ä–µ–¥–µ–π

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/maerty1/asterisk-stats.git
cd asterisk-stats
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª:

```env
# ==========================================
# Database Configuration
# ==========================================
DB_HOST=localhost
DB_USER=freepbxuser
DB_PASS=your_password_here
DB_NAME=asterisk
DB_CONNECTION_LIMIT=20

# ==========================================
# Database Adapter Selection
# ==========================================
# –î–æ—Å—Ç—É–ø–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã: mysql2, sequelize, knex, objection, bookshelf, typeorm, prisma
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: mysql2
DB_ADAPTER=mysql2

# ==========================================
# Outbound Calls Filter Configuration
# ==========================================
# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –Ω–æ–º–µ—Ä–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤
# –ò—Å—Ö–æ–¥—è—â–∏–µ = –∫–æ—Ä–æ—Ç–∫–∏–π src (<= OUTBOUND_MIN_LENGTH) -> –¥–ª–∏–Ω–Ω—ã–π dst (> OUTBOUND_MIN_LENGTH)
OUTBOUND_MIN_LENGTH=4

# ==========================================
# Email Configuration (–¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤)
# ==========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password_here
EMAIL_RECIPIENTS=recipient1@example.com,recipient2@example.com
EMAIL_FROM_NAME=Asterisk Analytics
EMAIL_CRON_SCHEDULE=59 23 * * *
TZ=Europe/Moscow

# ==========================================
# Server Configuration
# ==========================================
PORT=3000

# ==========================================
# Debug Configuration
# ==========================================
DEBUG=false

# ==========================================
# Recordings Path (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# ==========================================
RECORDINGS_PATH=/var/spool/asterisk/monitor
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è email-–æ—Ç—á–µ—Ç–æ–≤

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É `asteriskcdrdb.email_reports` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ email-–æ—Ç—á–µ—Ç–æ–≤.

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º:**
```bash
npm start
```

**–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π):**
```bash
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:3000`

### 6. –í—ã–±–æ—Ä –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ ORM –∏ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `mysql2`.

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã:**
- **mysql2** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –Ω–∞—Ç–∏–≤–Ω—ã–π MySQL –¥—Ä–∞–π–≤–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–º–∏—Å–æ–≤
- **sequelize** - –ø–æ–ø—É–ª—è—Ä–Ω—ã–π ORM –¥–ª—è Node.js
- **knex** - SQL query builder
- **objection** - ORM –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ Knex
- **bookshelf** - ORM –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ Knex
- **typeorm** - ORM –¥–ª—è TypeScript/JavaScript
- **prisma** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π ORM —Å type safety

**–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä:**

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `DB_ADAPTER` –≤ —Ñ–∞–π–ª–µ `.env`:

```env
DB_ADAPTER=sequelize
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**

–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ `package.json`. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:

```bash
# –î–ª—è Sequelize
npm install sequelize

# –î–ª—è Knex
npm install knex

# –î–ª—è Objection
npm install objection knex

# –î–ª—è Bookshelf
npm install bookshelf knex

# –î–ª—è TypeORM
npm install typeorm mysql2 reflect-metadata

# –î–ª—è Prisma (—Ç—Ä–µ–±—É–µ—Ç schema.prisma)
npm install @prisma/client prisma
npx prisma generate
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- `mysql2` —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `Prisma` —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `schema.prisma` —Ñ–∞–π–ª–∞
- `TypeORM` –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å TypeScript, –Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JavaScript
- –í—Å–µ –∞–¥–∞–ø—Ç–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π API —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –∞–¥–∞–ø—Ç–µ—Ä–æ–≤

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—á–µ—Ä–µ–¥—è–º

1. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–ü–æ –æ—á–µ—Ä–µ–¥—è–º"**
2. –í—ã–±–µ—Ä–∏—Ç–µ –æ—á–µ—Ä–µ–¥—å –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
3. –£–∫–∞–∂–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç (–Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞)
4. –ù–∞–∂–º–∏—Ç–µ **"–í—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑"**

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:
- **–°–µ–≥–æ–¥–Ω—è**
- **–í—á–µ—Ä–∞**
- **–ù–µ–¥–µ–ª—è**
- **–ú–µ—Å—è—Ü**

### –í—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏

1. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–í—Ö–æ–¥—è—â–∏–µ"**
2. –£–∫–∞–∂–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
3. –ù–∞–∂–º–∏—Ç–µ **"–í—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑"**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏ (–æ—Ç –¥–ª–∏–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –∫ –∫–æ—Ä–æ—Ç–∫–∏–º) —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

### –ò—Å—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏

1. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–ò—Å—Ö–æ–¥—è—â–∏–µ"**
2. –£–∫–∞–∂–∏—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç
3. –ù–∞–∂–º–∏—Ç–µ **"–í—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑"**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –∏—Å—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏ (–æ—Ç –∫–æ—Ä–æ—Ç–∫–∏—Ö –Ω–æ–º–µ—Ä–æ–≤ –∫ –¥–ª–∏–Ω–Ω—ã–º) —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–≠–∫—Å–ø–æ—Ä—Ç"** –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ email-–æ—Ç—á–µ—Ç–æ–≤

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ email"**
2. –í—ã–±–µ—Ä–∏—Ç–µ –æ—á–µ—Ä–µ–¥—å
3. –í–≤–µ–¥–∏—Ç–µ email-–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è
4. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å"**

–û—Ç—á–µ—Ç—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ `.env` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 23:59).

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
asterisk-stats/
‚îú‚îÄ‚îÄ app.js                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞ (Express)
‚îú‚îÄ‚îÄ helpers.js            # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ email-service.js      # –°–µ—Ä–≤–∏—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ email-–æ—Ç—á–µ—Ç–æ–≤
‚îú‚îÄ‚îÄ logger.js             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ package.json          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ views/                # EJS —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.ejs        # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ error.ejs        # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ public/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css    # –°—Ç–∏–ª–∏ Material Design 3
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ chart.js     # –õ–æ–≥–∏–∫–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ —Ç–∞–±–ª–∏—Ü
‚îÇ       ‚îî‚îÄ‚îÄ status-monitor.js  # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞
‚îú‚îÄ‚îÄ screen/               # –°–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ screen1.png      # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ screen2.png      # –î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥
‚îî‚îÄ‚îÄ .env                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –≤ git)
```

## üîç –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∑–≤–æ–Ω–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–µ—Ä–µ–∑–≤–æ–Ω—ã –¥–ª—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤:

- **–ü–µ—Ä–µ–∑–≤–æ–Ω–∏–ª —Å–∞–º**: –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–∑–≤–æ–Ω–∏–ª –≤ —Ç–µ—á–µ–Ω–∏–µ 2 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `cdr` –ø–æ –Ω–æ–º–µ—Ä—É –∫–ª–∏–µ–Ω—Ç–∞
  - –ò—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏—Å—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏ (dcontext –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç 'outbound', 'from-internal', 'ext-local')
  
- **–ü–µ—Ä–µ–∑–≤–æ–Ω–∏–ª–∏ –º—ã**: –ê–≥–µ–Ω—Ç –ø–µ—Ä–µ–∑–≤–æ–Ω–∏–ª –∫–ª–∏–µ–Ω—Ç—É –≤ —Ç–µ—á–µ–Ω–∏–µ 2 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `queuelog` –ø–æ –Ω–æ–º–µ—Ä—É –∫–ª–∏–µ–Ω—Ç–∞
  - –ò—â–µ—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–π –∑–≤–æ–Ω–æ–∫ –æ—Ç –∞–≥–µ–Ω—Ç–∞ –∫ –∫–ª–∏–µ–Ω—Ç—É
  
- **–ù–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω**: –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–≤–æ–Ω–æ–≤
  - –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∫: `–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ - –ü–µ—Ä–µ–∑–≤–æ–Ω–∏–ª —Å–∞–º - –ü–µ—Ä–µ–∑–≤–æ–Ω–∏–ª–∏ –º—ã`

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–≤–æ–Ω–∫–∞

**–í—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏:**
- `LENGTH(TRIM(src)) > OUTBOUND_MIN_LENGTH` (–¥–ª–∏–Ω–Ω—ã–π –Ω–æ–º–µ—Ä)
- `LENGTH(TRIM(dst)) <= OUTBOUND_MIN_LENGTH` (–∫–æ—Ä–æ—Ç–∫–∏–π –Ω–æ–º–µ—Ä)

**–ò—Å—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏:**
- `LENGTH(TRIM(src)) <= OUTBOUND_MIN_LENGTH` (–∫–æ—Ä–æ—Ç–∫–∏–π –Ω–æ–º–µ—Ä)
- `LENGTH(TRIM(dst)) > OUTBOUND_MIN_LENGTH` (–¥–ª–∏–Ω–Ω—ã–π –Ω–æ–º–µ—Ä)
- –ò–õ–ò `LENGTH(outbound_cnum) >= 4` (–ø–æ–ª–µ outbound_cnum –∑–∞–ø–æ–ª–Ω–µ–Ω–æ)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **Connection Pooling**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π MySQL –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **Batch Processing**: –ì—Ä—É–ø–ø–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–∑–≤–æ–Ω–æ–≤ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- **Compression**: Gzip —Å–∂–∞—Ç–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: 
  - Node.js 14+
  - Express.js 4.x
  - MySQL2 (—Å connection pooling)
  - Nodemailer (–¥–ª—è email-–æ—Ç—á–µ—Ç–æ–≤)
  - Node-cron (–¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á)
  
- **Frontend**: 
  - EJS (—à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä)
  - Material Design 3 (–¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞)
  - SVG –≥—Ä–∞—Ñ–∏–∫–∏ (Chart.js)
  - Vanilla JavaScript (ES6+)
  
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: 
  - MySQL/MariaDB
  - –¢–∞–±–ª–∏—Ü—ã: `cdr`, `queuelog`, `email_reports`

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π (prepared statements)
- Rate limiting –¥–ª—è API endpoints
- Helmet.js –¥–ª—è –∑–∞—â–∏—Ç—ã HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üë§ –ê–≤—Ç–æ—Ä

**maerty1**

- GitHub: [@maerty1](https://github.com/maerty1)

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è Pull Requests! –î–ª—è –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ Issue –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.

### –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥:

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/AmazingFeature`)
3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. Push –≤ –≤–µ—Ç–∫—É (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –±–∞–≥, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ Issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å, —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

## üîÑ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### v1.0.0 (–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—á–µ—Ä–µ–¥—è–º
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∑–≤–æ–Ω–æ–≤ (–∫–ª–∏–µ–Ω—Ç –∏ –∞–≥–µ–Ω—Ç)
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –≤—Ö–æ–¥—è—â–∏—Ö –∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤
- ‚úÖ Email-–æ—Ç—á–µ—Ç—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- ‚úÖ Dashboard —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ –∑–≤–æ–Ω–∫–æ–≤ —Å –ø–æ–∏—Å–∫–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV
- ‚úÖ Material Design 3 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É!
