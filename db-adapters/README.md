# Адаптеры базы данных

Эта директория содержит адаптеры для различных ORM и коннекторов БД.

## Поддерживаемые адаптеры

### mysql2 (по умолчанию)
- **Пакет**: `mysql2`
- **Преимущества**: Максимальная производительность, нативный драйвер
- **Рекомендуется для**: Production окружений с высокими нагрузками

### Sequelize
- **Пакет**: `sequelize`
- **Преимущества**: Популярный ORM, богатая функциональность
- **Использование**: `DB_ADAPTER=sequelize`

### Knex.js
- **Пакет**: `knex`
- **Преимущества**: SQL query builder, гибкость
- **Использование**: `DB_ADAPTER=knex`

### Objection.js
- **Пакет**: `objection`, `knex`
- **Преимущества**: ORM на основе Knex, простота использования
- **Использование**: `DB_ADAPTER=objection`

### Bookshelf.js
- **Пакет**: `bookshelf`, `knex`
- **Преимущества**: ORM на основе Knex, схожий с Backbone.js API
- **Использование**: `DB_ADAPTER=bookshelf`

### TypeORM
- **Пакет**: `typeorm`, `mysql2`, `reflect-metadata`
- **Преимущества**: TypeScript поддержка, мощный ORM
- **Использование**: `DB_ADAPTER=typeorm`
- **Примечание**: Лучше работает с TypeScript

### Prisma
- **Пакет**: `@prisma/client`, `prisma`
- **Преимущества**: Type safety, современный подход
- **Использование**: `DB_ADAPTER=prisma`
- **Примечание**: Требует настройки `schema.prisma` файла

## Использование

Установите переменную окружения в `.env`:

```env
DB_ADAPTER=sequelize
```

Все адаптеры реализуют единый интерфейс `BaseAdapter` и обеспечивают совместимость API.

## Структура адаптера

Каждый адаптер должен реализовать следующие методы:

- `execute(sql, params)` - Выполнить параметризованный запрос
- `query(sql)` - Выполнить SQL запрос
- `beginTransaction()` - Начать транзакцию
- `executeInTransaction(transaction, sql, params)` - Выполнить запрос в транзакции
- `commit(transaction)` - Закоммитить транзакцию
- `rollback(transaction)` - Откатить транзакцию
- `getConnection()` - Получить соединение
- `getPoolStats()` - Получить статистику пула
- `getPool()` - Получить пул/клиент
- `close()` - Закрыть все соединения

## Добавление нового адаптера

1. Создайте файл `db-adapters/your-adapter.js`
2. Наследуйте от `BaseAdapter`
3. Реализуйте все требуемые методы
4. Добавьте адаптер в `db-factory.js`

